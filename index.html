import React, { useState, useEffect, useRef } from 'react';
import { 
  Menu, X, ChevronDown, CheckCircle, Globe, 
  Users, BarChart2, Shield, BookOpen, 
  Target, Zap, Layout, FileText, Anchor, 
  Award, Briefcase, ArrowRight, Star
} from 'lucide-react';

/* SYNERGY Consulting & Training - Immersive 3D Experience
  Built with React, Tailwind CSS, and HTML5 Canvas for Particles
*/

// --- 3D UTILITIES ---

// Component for 3D Tilt Effect on Hover
const TiltCard = ({ children, className = "" }) => {
  const [transform, setTransform] = useState("");
  const ref = useRef(null);

  const handleMouseMove = (e) => {
    if (!ref.current) return;
    const { left, top, width, height } = ref.current.getBoundingClientRect();
    const x = (e.clientX - left) / width;
    const y = (e.clientY - top) / height;
    const tiltX = (0.5 - y) * 20; // Adjust multiplier for tilt intensity
    const tiltY = (x - 0.5) * 20;
    setTransform(`perspective(1000px) rotateX(${tiltX}deg) rotateY(${tiltY}deg) scale3d(1.02, 1.02, 1.02)`);
  };

  const handleMouseLeave = () => {
    setTransform("perspective(1000px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)");
  };

  return (
    <div 
      ref={ref}
      onMouseMove={handleMouseMove}
      onMouseLeave={handleMouseLeave}
      className={`transition-transform duration-200 ease-out transform-gpu ${className}`}
      style={{ transform }}
    >
      {children}
    </div>
  );
};

// Component for Interactive Particle Background (The "Synergy" Network)
const ParticleNetwork = () => {
  const canvasRef = useRef(null);

  useEffect(() => {
    const canvas = canvasRef.current;
    const ctx = canvas.getContext('2d');
    let animationFrameId;
    let particles = [];
    let mouse = { x: null, y: null };

    const resize = () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    };
    
    window.addEventListener('resize', resize);
    resize();

    window.addEventListener('mousemove', (e) => {
      mouse.x = e.x;
      mouse.y = e.y;
    });

    class Particle {
      constructor() {
        this.x = Math.random() * canvas.width;
        this.y = Math.random() * canvas.height;
        this.size = Math.random() * 2 + 0.5;
        this.speedX = Math.random() * 1 - 0.5;
        this.speedY = Math.random() * 1 - 0.5;
        this.color = `rgba(${Math.random() > 0.5 ? '251, 191, 36' : '56, 189, 248'}, ${Math.random() * 0.5 + 0.2})`; // Amber or Cyan
      }
      update() {
        this.x += this.speedX;
        this.y += this.speedY;
        if (this.x > canvas.width) this.x = 0;
        if (this.x < 0) this.x = canvas.width;
        if (this.y > canvas.height) this.y = 0;
        if (this.y < 0) this.y = canvas.height;
        
        // Mouse interaction
        const dx = mouse.x - this.x;
        const dy = mouse.y - this.y;
        const distance = Math.sqrt(dx * dx + dy * dy);
        if (distance < 150) {
            this.x += dx * 0.02;
            this.y += dy * 0.02;
        }
      }
      draw() {
        ctx.fillStyle = this.color;
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fill();
      }
    }

    const init = () => {
      particles = [];
      const numberOfParticles = Math.min(100, (canvas.width * canvas.height) / 15000);
      for (let i = 0; i < numberOfParticles; i++) {
        particles.push(new Particle());
      }
    };

    const animate = () => {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      for (let i = 0; i < particles.length; i++) {
        particles[i].update();
        particles[i].draw();
        
        // Draw connections (Synergy)
        for (let j = i; j < particles.length; j++) {
          const dx = particles[i].x - particles[j].x;
          const dy = particles[i].y - particles[j].y;
          const distance = Math.sqrt(dx * dx + dy * dy);
          
          if (distance < 120) {
            ctx.beginPath();
            ctx.strokeStyle = `rgba(255, 255, 255, ${0.15 - distance/800})`;
            ctx.lineWidth = 0.5;
            ctx.moveTo(particles[i].x, particles[i].y);
            ctx.lineTo(particles[j].x, particles[j].y);
            ctx.stroke();
          }
        }
      }
      animationFrameId = requestAnimationFrame(animate);
    };

    init();
    animate();

    return () => {
      window.removeEventListener('resize', resize);
      cancelAnimationFrame(animationFrameId);
    };
  }, []);

  return <canvas ref={canvasRef} className="fixed top-0 left-0 w-full h-full -z-0 pointer-events-none opacity-40" />;
};

// --- MAIN APP ---

const App = () => {
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [activeAccordion, setActiveAccordion] = useState(null);
  const [scrolled, setScrolled] = useState(false);

  useEffect(() => {
    const handleScroll = () => setScrolled(window.scrollY > 50);
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  const toggleMenu = () => setIsMenuOpen(!isMenuOpen);
  
  const toggleAccordion = (index) => {
    setActiveAccordion(activeAccordion === index ? null : index);
  };

  const scrollToSection = (id) => {
    setIsMenuOpen(false);
    const element = document.getElementById(id);
    if (element) {
      element.scrollIntoView({ behavior: 'smooth' });
    }
  };

  return (
    <div className="min-h-screen bg-[#0f172a] font-sans text-slate-200 overflow-x-hidden relative selection:bg-amber-500 selection:text-white">
      
      {/* 3D Background */}
      <div className="fixed inset-0 bg-gradient-to-b from-[#020617] via-[#0f172a] to-[#1e293b] -z-10"></div>
      <ParticleNetwork />
      
      {/* Abstract Glowing Orbs (CSS) */}
      <div className="fixed top-[-10%] right-[-10%] w-[600px] h-[600px] bg-blue-600/20 rounded-full blur-[120px] -z-10 animate-pulse"></div>
      <div className="fixed bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-amber-600/10 rounded-full blur-[100px] -z-10 animate-pulse delay-1000"></div>

      {/* Navigation */}
      <nav className={`fixed w-full z-50 transition-all duration-300 ${scrolled ? 'bg-[#0f172a]/80 backdrop-blur-lg border-b border-white/10 shadow-lg shadow-black/20' : 'bg-transparent'}`}>
        <div className="container mx-auto px-4 md:px-6">
          <div className="flex justify-between items-center h-20">
            {/* Logo */}
            <div className="flex items-center space-x-2 cursor-pointer group" onClick={() => scrollToSection('hero')}>
              <div className="relative">
                <div className="absolute inset-0 bg-amber-500 blur opacity-40 group-hover:opacity-80 transition-opacity rounded-lg"></div>
                <div className="relative bg-blue-950/80 border border-white/10 p-2 rounded-lg backdrop-blur-sm">
                  <Zap className="text-amber-400 h-6 w-6" />
                </div>
              </div>
              <div className="flex flex-col">
                <span className="text-2xl font-bold text-white tracking-tight drop-shadow-md">SYNERGY</span>
                <span className="text-[10px] text-slate-400 uppercase tracking-[0.2em]">Consulting & Training</span>
              </div>
            </div>

            {/* Desktop Menu */}
            <div className="hidden md:flex space-x-8 font-medium text-sm">
              {['About', 'Services', 'Strategy', 'Training', 'Team'].map((item) => (
                <button 
                  key={item} 
                  onClick={() => scrollToSection(item.toLowerCase())}
                  className="relative text-slate-300 hover:text-white transition-colors uppercase tracking-wide group py-2"
                >
                  {item}
                  <span className="absolute bottom-0 left-0 w-0 h-0.5 bg-amber-500 transition-all duration-300 group-hover:w-full"></span>
                </button>
              ))}
              <button 
                onClick={() => scrollToSection('contact')}
                className="bg-gradient-to-r from-blue-600 to-blue-800 hover:from-blue-500 hover:to-blue-700 text-white px-6 py-2.5 rounded-full transition-all shadow-lg shadow-blue-500/30 hover:shadow-blue-500/50 border border-white/10 font-semibold tracking-wide"
              >
                Contact Us
              </button>
            </div>

            {/* Mobile Menu Button */}
            <div className="md:hidden">
              <button onClick={toggleMenu} className="text-white focus:outline-none p-2 rounded-lg hover:bg-white/10">
                {isMenuOpen ? <X size={28} /> : <Menu size={28} />}
              </button>
            </div>
          </div>
        </div>

        {/* Mobile Menu Dropdown */}
        {isMenuOpen && (
          <div className="md:hidden absolute w-full bg-[#0f172a]/95 backdrop-blur-xl border-t border-white/10 p-4 shadow-2xl">
            <div className="flex flex-col space-y-4">
              {['About', 'Services', 'Strategy', 'Training', 'Team', 'Contact'].map((item) => (
                <button 
                  key={item}
                  onClick={() => scrollToSection(item.toLowerCase())}
                  className="text-left py-3 px-4 rounded-lg font-medium text-slate-300 hover:bg-white/5 hover:text-amber-400 transition-all border-b border-white/5 last:border-0"
                >
                  {item}
                </button>
              ))}
            </div>
          </div>
        )}
      </nav>

      {/* Hero Section */}
      <section id="hero" className="relative min-h-screen flex items-center justify-center pt-20 overflow-hidden">
        <div className="container mx-auto px-4 md:px-6 relative z-10 text-center md:text-left">
          <div className="flex flex-col md:flex-row items-center gap-12">
            <div className="md:w-3/5 space-y-8">
              <div className="inline-flex items-center px-4 py-2 bg-blue-900/30 border border-blue-500/30 rounded-full text-blue-200 text-xs font-bold tracking-[0.2em] uppercase backdrop-blur-md animate-fade-in-up">
                <span className="w-2 h-2 rounded-full bg-amber-500 mr-2 animate-pulse"></span>
                Palestine • Gaza • Est. 2023
              </div>
              
              <h1 className="text-5xl md:text-7xl font-extrabold leading-tight text-transparent bg-clip-text bg-gradient-to-r from-white via-slate-200 to-slate-400 drop-shadow-sm">
                Strategic Partner for <br />
                <span className="relative inline-block mt-2">
                   <span className="absolute inset-0 bg-amber-500/20 blur-xl filter"></span>
                   <span className="relative text-amber-400">Resilient & Accountable</span>
                </span> Impact
              </h1>
              
              <p className="text-lg md:text-xl text-slate-300 leading-relaxed max-w-2xl border-l-2 border-amber-500/50 pl-6 mx-auto md:mx-0">
                Bridging the gap between global standards and post-war realities. We empower local institutions to manage recovery funding with sophistication, transparency, and operational excellence.
              </p>
              
              <div className="flex flex-col sm:flex-row gap-5 pt-4 justify-center md:justify-start">
                <button onClick={() => scrollToSection('services')} className="group relative px-8 py-4 bg-amber-500 text-blue-950 font-bold rounded-xl overflow-hidden transition-all hover:scale-105 shadow-[0_0_40px_-10px_rgba(245,158,11,0.5)]">
                  <div className="absolute inset-0 w-full h-full bg-gradient-to-r from-transparent via-white/40 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"></div>
                  <span className="flex items-center">Explore Services <ArrowRight className="ml-2 h-5 w-5 group-hover:translate-x-1 transition-transform" /></span>
                </button>
                <button onClick={() => scrollToSection('about')} className="px-8 py-4 bg-white/5 border border-white/10 text-white font-semibold rounded-xl hover:bg-white/10 hover:border-white/30 transition-all backdrop-blur-sm flex items-center justify-center">
                  Our Mission
                </button>
              </div>
            </div>

            {/* Hero Visual Element (Abstract 3D Representation) */}
            <div className="md:w-2/5 relative h-[400px] w-full flex items-center justify-center">
               {/* Central Orb */}
               <div className="relative w-64 h-64">
                  <div className="absolute inset-0 rounded-full border border-blue-400/30 animate-[spin_10s_linear_infinite]"></div>
                  <div className="absolute inset-4 rounded-full border border-amber-400/20 animate-[spin_15s_linear_infinite_reverse]"></div>
                  <div className="absolute inset-0 rounded-full bg-gradient-to-br from-blue-600/20 to-amber-500/20 backdrop-blur-xl border border-white/10 shadow-[0_0_50px_rgba(59,130,246,0.3)]"></div>
                  
                  {/* Floating Elements inside */}
                  <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-white text-center">
                    <Zap className="w-16 h-16 text-amber-400 mx-auto drop-shadow-[0_0_15px_rgba(251,191,36,0.8)]" />
                    <div className="mt-2 text-sm font-bold tracking-widest text-blue-200">SYNERGY</div>
                  </div>

                  {/* Orbiting Planets */}
                  <div className="absolute top-0 left-1/2 w-4 h-4 bg-blue-400 rounded-full shadow-[0_0_10px_#60a5fa] animate-ping"></div>
                  <div className="absolute bottom-10 right-0 w-3 h-3 bg-amber-400 rounded-full shadow-[0_0_10px_#fbbf24]"></div>
               </div>
            </div>
          </div>
        </div>
        
        {/* Scroll Indicator */}
        <div className="absolute bottom-10 left-1/2 -translate-x-1/2 animate-bounce opacity-50">
          <ChevronDown className="text-white w-8 h-8" />
        </div>
      </section>

      {/* Executive Summary & Context */}
      <section id="about" className="py-24 relative z-10">
        <div className="container mx-auto px-4 md:px-6">
          <div className="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
            <div className="space-y-6">
              <h2 className="text-sm font-bold text-amber-400 uppercase tracking-widest mb-2">The Context</h2>
              <h3 className="text-3xl md:text-4xl font-bold text-white">Post-War Reality & <br />Institutional Recovery</h3>
              <p className="text-slate-400 text-lg leading-relaxed">
                In the wake of crisis, the Gaza Strip faces unprecedented challenges. Infrastructure is compromised, and recovery funding demands sophisticated, accountable systems.
              </p>
              <p className="text-slate-400 text-lg leading-relaxed">
                <strong className="text-white">SYNERGY</strong> acts as the architectural bridge between international donor expectations and local operational realities, ensuring resilience is built into every project.
              </p>
              
              <div className="bg-gradient-to-r from-blue-900/40 to-transparent border-l-4 border-amber-500 p-6 rounded-r-lg backdrop-blur-sm">
                <h4 className="font-bold text-white mb-2 flex items-center"><Shield className="w-5 h-5 mr-2 text-amber-500" /> Compliance Guardrail</h4>
                <p className="text-sm text-slate-300">
                  We close the gap on CHS, SPHERE, and RBM standards, enabling local institutions to absorb funding securely.
                </p>
              </div>
            </div>

            <div className="grid grid-cols-1 sm:grid-cols-2 gap-6">
              <TiltCard className="h-full">
                <GlassCard 
                  icon={<Target className="text-blue-400" />} 
                  title="Vision" 
                  content="To be a trusted catalyst for institutional growth, empowering local organizations to achieve sustainable, resilient impact in high-risk zones."
                />
              </TiltCard>
              <TiltCard className="h-full">
                <GlassCard 
                  icon={<Anchor className="text-amber-400" />} 
                  title="Mission" 
                  content="Rapidly bridge the post-war capacity gap by providing crisis-adapted consulting aligned with international standards."
                />
              </TiltCard>
              <TiltCard className="sm:col-span-2 h-full">
                <div className="bg-gradient-to-br from-blue-900/60 to-slate-900/60 p-8 rounded-2xl border border-white/10 shadow-xl backdrop-blur-md h-full relative overflow-hidden group">
                  <div className="absolute top-0 right-0 p-32 bg-amber-500/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 group-hover:bg-amber-500/20 transition-colors"></div>
                  <h3 className="font-bold text-xl mb-6 flex items-center text-white relative z-10">
                    <Award className="mr-3 text-amber-400" /> Unique Value Proposition
                  </h3>
                  <div className="grid sm:grid-cols-3 gap-4 relative z-10">
                    <div className="bg-white/5 p-4 rounded-lg border border-white/5 hover:border-amber-500/30 transition-colors">
                        <CheckCircle className="h-6 w-6 mb-3 text-amber-400" />
                        <span className="text-sm text-slate-300 font-medium">Certified Expertise (PMP®, PMD Pro)</span>
                    </div>
                    <div className="bg-white/5 p-4 rounded-lg border border-white/5 hover:border-amber-500/30 transition-colors">
                        <Shield className="h-6 w-6 mb-3 text-blue-400" />
                        <span className="text-sm text-slate-300 font-medium">Crisis-Adapted Resilience</span>
                    </div>
                    <div className="bg-white/5 p-4 rounded-lg border border-white/5 hover:border-amber-500/30 transition-colors">
                        <BarChart2 className="h-6 w-6 mb-3 text-emerald-400" />
                        <span className="text-sm text-slate-300 font-medium">De-risking Investments</span>
                    </div>
                  </div>
                </div>
              </TiltCard>
            </div>
          </div>
        </div>
      </section>

      {/* Core Services - 3D Grid */}
      <section id="services" className="py-24 relative bg-[#0B1120]">
        <div className="container mx-auto px-4 md:px-6 relative z-10">
          <div className="text-center max-w-3xl mx-auto mb-16">
            <span className="text-amber-500 font-bold tracking-widest uppercase text-xs">Services</span>
            <h2 className="text-3xl md:text-5xl font-bold text-white mt-3 mb-6">Core Capabilities</h2>
            <p className="text-slate-400">Tailored solutions engineered for International Agencies, NGOs, and Municipalities.</p>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 perspective-1000">
            <ServiceCard3D 
              icon={<Layout className="h-10 w-10 text-cyan-400" />}
              title="Institutional Strengthening"
              items={["Capacity Assessments (ICAs)", "Donor Compliance Audits", "Organizational Resilience"]}
              accent="border-cyan-500/30"
              bg="from-cyan-900/20 to-slate-900/50"
            />
            <ServiceCard3D 
              icon={<Briefcase className="h-10 w-10 text-amber-400" />}
              title="Project Management"
              items={["PMP® / PMD Pro Alignment", "Agile Project Leadership", "Crisis-Adapted Implementation"]}
              accent="border-amber-500/30"
              bg="from-amber-900/20 to-slate-900/50"
            />
            <ServiceCard3D 
              icon={<BarChart2 className="h-10 w-10 text-purple-400" />}
              title="MEAL & Accountability"
              items={["MEAL System Design", "Results-Based Reporting", "Indicator Frameworks"]}
              accent="border-purple-500/30"
              bg="from-purple-900/20 to-slate-900/50"
            />
            <ServiceCard3D 
              icon={<FileText className="h-10 w-10 text-pink-400" />}
              title="Specialized Consulting"
              items={["Context Analysis", "Needs Assessments", "Thematic Studies"]}
              accent="border-pink-500/30"
              bg="from-pink-900/20 to-slate-900/50"
            />
            <ServiceCard3D 
              icon={<Shield className="h-10 w-10 text-red-400" />}
              title="Risk Management"
              items={["Risk Registers", "Contingency Planning", "Security-Sensitive SOPs"]}
              accent="border-red-500/30"
              bg="from-red-900/20 to-slate-900/50"
            />
            <ServiceCard3D 
              icon={<Users className="h-10 w-10 text-emerald-400" />}
              title="Training & Capacity"
              items={["Emergency Response Modules", "Institutional Teams", "Toolkits & Job Aids"]}
              accent="border-emerald-500/30"
              bg="from-emerald-900/20 to-slate-900/50"
            />
          </div>
        </div>
      </section>

      {/* Strategic Framework - Interactive Timeline */}
      <section id="strategy" className="py-24 relative overflow-hidden">
        <div className="absolute inset-0 bg-blue-900/5 skew-y-3 transform origin-top-left -z-10"></div>
        <div className="container mx-auto px-4 md:px-6">
           <div className="text-center mb-16">
            <h2 className="text-4xl font-bold text-white mb-2">Strategic Framework <span className="text-amber-500">2024–2027</span></h2>
            <p className="text-slate-400">Four pillars guiding our impact ecosystem.</p>
          </div>

          <div className="relative">
            {/* Connecting Line for Desktop */}
            <div className="hidden lg:block absolute top-1/2 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-blue-500/50 to-transparent -translate-y-1/2 z-0"></div>

            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 relative z-10">
              <StrategyPillar3D 
                number="01"
                title="Institutional Strengthening"
                desc="Equip local actors to manage recovery resources with accountability."
              />
              <StrategyPillar3D 
                number="02"
                title="Excellence in Consulting"
                desc="High-value, context-aware advisory for donors and UN agencies."
              />
              <StrategyPillar3D 
                number="03"
                title="Sustainable Development"
                desc="Building structure and scalability for long-term partnerships."
              />
              <StrategyPillar3D 
                number="04"
                title="Innovation & Digital"
                desc="Mainstreaming MEAL dashboards, AI, and digital transformation."
              />
            </div>
          </div>
        </div>
      </section>

      {/* Training Programs - Holographic Style */}
      <section id="training" className="py-24 relative">
        <div className="absolute inset-0 bg-gradient-to-b from-slate-900 to-black -z-20"></div>
        <div className="container mx-auto px-4 md:px-6">
          <div className="flex flex-col md:flex-row gap-12">
            {/* Left Column: Info */}
            <div className="md:w-1/3 sticky top-24 self-start">
              <div className="inline-block px-3 py-1 bg-amber-500/10 border border-amber-500/20 rounded-lg text-amber-400 text-xs font-bold mb-6">ACCREDITED PROGRAM</div>
              <h2 className="text-4xl font-bold text-white mb-6 leading-tight">Gaza Institutional Resilience Track</h2>
              <p className="text-slate-400 mb-8">
                 20 specialized modules designed for the specific constraints of the post-war environment.
              </p>
              <div className="bg-white/5 p-6 rounded-2xl backdrop-blur-md border border-white/10 shadow-lg">
                <h4 className="font-bold text-white mb-4 border-b border-white/10 pb-2">Methodology</h4>
                <ul className="space-y-4 text-sm text-slate-300">
                  <li className="flex items-center"><Globe size={16} className="mr-3 text-blue-400" /> Global Standards (PMP®, Sphere)</li>
                  <li className="flex items-center"><Zap size={16} className="mr-3 text-amber-400" /> Experiential Learning (60% Interactive)</li>
                  <li className="flex items-center"><Layout size={16} className="mr-3 text-emerald-400" /> Toolkits & Job Aids</li>
                  <li className="flex items-center"><BarChart2 size={16} className="mr-3 text-purple-400" /> Kirkpatrick Evaluation</li>
                </ul>
              </div>
            </div>

            {/* Right Column: Modules Accordion */}
            <div className="md:w-2/3">
              <div className="space-y-4">
                <AccordionItem3D 
                  title="Cluster A: Humanitarian Foundations & Protection"
                  isOpen={activeAccordion === 0}
                  onClick={() => toggleAccordion(0)}
                  content="Humanitarian Principles, CHS, Sphere, Safer Programming, Do No Harm, Protection & Gender Responsive Programming."
                />
                <AccordionItem3D 
                  title="Cluster B: MEAL & Results-Based Accountability"
                  isOpen={activeAccordion === 1}
                  onClick={() => toggleAccordion(1)}
                  content="MEAL Systems, RBM, Theory of Change, Logframes, Results-Based Reporting, Accountability to Affected Populations (AAP), PSEA."
                />
                <AccordionItem3D 
                  title="Cluster C: Project & Risk Management"
                  isOpen={activeAccordion === 2}
                  onClick={() => toggleAccordion(2)}
                  content="PMP® / PMD Pro Foundations, Agile & Crisis Leadership, Risk Management, Operational Resilience, Humanitarian Procurement."
                />
                <AccordionItem3D 
                  title="Cluster D: Proposal Development & Compliance"
                  isOpen={activeAccordion === 3}
                  onClick={() => toggleAccordion(3)}
                  content="Proposal Writing, Budgeting, Financial Stewardship, Donor Compliance, Audit Readiness, Governance."
                />
                <AccordionItem3D 
                  title="Cluster E: Digital Skills & Wellbeing"
                  isOpen={activeAccordion === 4}
                  onClick={() => toggleAccordion(4)}
                  content="Data Management, Dashboards, Responsible AI, Leadership, Change Management, Stress Management & Psychosocial Wellbeing."
                />
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Team Section */}
      <section id="team" className="py-24 relative overflow-hidden bg-[#0f172a]">
        {/* Background Grid */}
        <div className="absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_0%,#000_70%,transparent_100%)]"></div>
        
        <div className="container mx-auto px-4 md:px-6 relative z-10">
          <div className="text-center mb-16">
            <h2 className="text-4xl font-bold text-white">Our Core Team</h2>
            <p className="text-slate-400 mt-3">Leadership forged in crisis, certified globally.</p>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto">
            <TeamCard3D 
              name="Salah M. Tayeh"
              role="Director & Senior Consultant"
              desc="24+ years in humanitarian & development PM. Expert in institutional capacity building, MEAL, and donor-funded programs in Gaza and the region."
              color="from-blue-500 to-blue-700"
            />
            <TeamCard3D 
              name="Ahmed S. AbuAbdu"
              role="Senior Consultant"
              desc="Expert in municipal services continuity under war. Specializes in change management, governance, and public service delivery in high-risk environments."
              color="from-amber-500 to-amber-700"
            />
          </div>
        </div>
      </section>

      {/* Footer */}
      <footer id="contact" className="bg-[#020617] text-slate-400 py-16 border-t border-white/10">
        <div className="container mx-auto px-4 md:px-6">
          <div className="grid grid-cols-1 md:grid-cols-3 gap-12">
            <div>
              <div className="flex items-center space-x-2 mb-6 text-white">
                 <Zap className="text-amber-500 h-6 w-6" />
                 <span className="text-2xl font-bold tracking-tight">SYNERGY</span>
              </div>
              <p className="mb-6 text-sm leading-relaxed max-w-xs">
                Empowering local organizations in Gaza to achieve sustainable, resilient, and accountable impact through world-class training and consulting.
              </p>
              <div className="flex space-x-4">
                  {/* Social placeholders */}
                  <div className="w-10 h-10 rounded-full bg-white/5 flex items-center justify-center hover:bg-amber-500 hover:text-white transition-colors cursor-pointer"><Globe size={18} /></div>
                  <div className="w-10 h-10 rounded-full bg-white/5 flex items-center justify-center hover:bg-blue-600 hover:text-white transition-colors cursor-pointer"><Users size={18} /></div>
              </div>
            </div>
            
            <div>
              <h4 className="text-white font-bold mb-6 text-lg">Contact Us</h4>
              <ul className="space-y-4 text-sm">
                <li className="flex items-center group">
                    <div className="w-8 flex justify-center group-hover:text-amber-400 transition-colors"><Globe size={18} /></div>
                    <span className="group-hover:text-white transition-colors">Gaza City, Palestine</span>
                </li>
                <li className="flex items-center group">
                    <div className="w-8 flex justify-center group-hover:text-amber-400 transition-colors"><Briefcase size={18} /></div>
                    <span className="group-hover:text-white transition-colors">info@synergy-gaza.com</span>
                </li>
                 <li className="flex items-center group">
                    <div className="w-8 flex justify-center group-hover:text-amber-400 transition-colors"><Users size={18} /></div>
                    <span className="group-hover:text-white transition-colors">+970 59 000 0000</span>
                </li>
              </ul>
            </div>

            <div>
              <h4 className="text-white font-bold mb-6 text-lg">Quick Links</h4>
              <ul className="space-y-2 text-sm">
                {['About Us', 'Consulting Services', 'Training Programs', 'Strategic Framework'].map((link, i) => (
                    <li key={i}>
                        <button onClick={() => scrollToSection(['about','services','training','strategy'][i])} className="hover:text-amber-400 hover:translate-x-2 transition-all duration-300 flex items-center">
                            <span className="w-1.5 h-1.5 bg-amber-500 rounded-full mr-2 opacity-0 hover:opacity-100 transition-opacity"></span>
                            {link}
                        </button>
                    </li>
                ))}
              </ul>
            </div>
          </div>
          
          <div className="border-t border-white/5 mt-12 pt-8 text-center text-xs flex flex-col md:flex-row justify-between items-center text-slate-600">
            <p>&copy; 2024 SYNERGY Consulting & Training. All rights reserved.</p>
            <p className="mt-2 md:mt-0">Built for Resilience.</p>
          </div>
        </div>
      </footer>
    </div>
  );
};

/* --- IMMERSIVE COMPONENTS --- */

const GlassCard = ({ icon, title, content }) => (
  <div className="bg-white/5 p-8 rounded-2xl border border-white/10 hover:border-white/20 hover:bg-white/10 transition-all backdrop-blur-md h-full flex flex-col shadow-xl">
    <div className="mb-6 bg-slate-900/50 w-14 h-14 rounded-xl flex items-center justify-center border border-white/5 shadow-inner">
      {icon}
    </div>
    <h3 className="text-xl font-bold text-white mb-3">{title}</h3>
    <p className="text-slate-400 text-sm leading-relaxed">{content}</p>
  </div>
);

const ServiceCard3D = ({ icon, title, items, accent, bg }) => (
  <TiltCard>
    <div className={`relative rounded-2xl overflow-hidden border ${accent} bg-gradient-to-br ${bg} backdrop-blur-md p-1 group h-full`}>
      <div className="absolute inset-0 bg-white/5 opacity-0 group-hover:opacity-100 transition-opacity"></div>
      <div className="relative bg-[#0f172a]/80 h-full rounded-xl p-6 transition-colors group-hover:bg-[#0f172a]/60">
        <div className="mb-6 p-3 bg-white/5 rounded-lg inline-block">{icon}</div>
        <h3 className="font-bold text-xl text-white mb-4 group-hover:text-amber-400 transition-colors">{title}</h3>
        <ul className="space-y-3">
          {items.map((item, idx) => (
            <li key={idx} className="flex items-start text-sm text-slate-300">
              <span className="mr-2 text-amber-500 mt-1">▹</span>
              {item}
            </li>
          ))}
        </ul>
      </div>
    </div>
  </TiltCard>
);

const StrategyPillar3D = ({ number, title, desc }) => (
  <div className="group relative">
    <div className="absolute inset-0 bg-amber-500 blur-xl opacity-0 group-hover:opacity-20 transition-opacity duration-500"></div>
    <div className="bg-[#1e293b]/50 p-6 rounded-2xl border border-white/10 backdrop-blur-sm hover:-translate-y-2 transition-transform duration-300 relative z-10 h-full flex flex-col">
      <div className="text-5xl font-black text-white/5 absolute top-2 right-4 z-0 group-hover:text-amber-500/10 transition-colors">{number}</div>
      <div className="relative z-10 flex-grow">
        <div className="w-10 h-1 bg-amber-500 mb-4 rounded-full group-hover:w-20 transition-all duration-300"></div>
        <h3 className="font-bold text-white text-lg mb-3 leading-snug">{title}</h3>
        <p className="text-slate-400 text-sm">{desc}</p>
      </div>
    </div>
    {/* Node point for the line */}
    <div className="hidden lg:block absolute top-1/2 left-0 w-3 h-3 bg-slate-800 border-2 border-blue-500 rounded-full -translate-x-[6px] -translate-y-1/2 z-20 group-hover:bg-amber-500 group-hover:border-amber-300 transition-colors shadow-[0_0_10px_rgba(59,130,246,0.5)]"></div>
  </div>
);

const AccordionItem3D = ({ title, content, isOpen, onClick }) => (
  <div className={`mb-3 transition-all duration-300 ${isOpen ? 'transform scale-[1.02]' : ''}`}>
    <div 
        className={`rounded-xl overflow-hidden border ${isOpen ? 'border-amber-500/50 bg-slate-800/80' : 'border-white/10 bg-white/5'} backdrop-blur-sm transition-all`}
    >
      <button 
        className="w-full flex justify-between items-center p-5 text-left font-semibold text-white hover:bg-white/5 transition-colors"
        onClick={onClick}
      >
        <span className={`${isOpen ? 'text-amber-400' : 'text-slate-200'}`}>{title}</span>
        <ChevronDown className={`text-slate-400 transform transition-transform duration-300 ${isOpen ? 'rotate-180 text-amber-400' : ''}`} size={20} />
      </button>
      <div className={`overflow-hidden transition-[max-height] duration-500 ease-in-out ${isOpen ? 'max-h-96' : 'max-h-0'}`}>
        <div className="p-5 pt-0 text-slate-300 text-sm leading-relaxed border-t border-white/5">
          <div className="pt-4">{content}</div>
        </div>
      </div>
    </div>
  </div>
);

const TeamCard3D = ({ name, role, desc, color }) => (
  <TiltCard>
    <div className="flex flex-col sm:flex-row items-center bg-white/5 p-8 rounded-2xl border border-white/10 backdrop-blur-sm hover:bg-white/10 transition-colors group">
        <div className={`w-24 h-24 rounded-2xl bg-gradient-to-br ${color} flex items-center justify-center text-white font-bold text-2xl mb-6 sm:mb-0 sm:mr-8 shrink-0 shadow-lg shadow-black/30 group-hover:scale-110 transition-transform duration-300`}>
        {name.split(' ').map(n => n[0]).join('')}
        </div>
        <div className="text-center sm:text-left">
        <h3 className="font-bold text-white text-xl mb-1">{name}</h3>
        <div className="text-amber-400 text-sm font-medium mb-3 uppercase tracking-wider">{role}</div>
        <p className="text-slate-400 text-sm leading-relaxed">{desc}</p>
        </div>
    </div>
  </TiltCard>
);

export default App;
